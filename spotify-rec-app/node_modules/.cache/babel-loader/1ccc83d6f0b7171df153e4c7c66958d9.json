{"ast":null,"code":"var _jsxFileName = \"/Users/kyle.snow/repos/spotify_recommendation_engine/spotify-rec-app/src/Home.js\";\nimport React, { useState, useEffect } from 'react';\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport Banner from './Banner';\n\nfunction Home() {\n  const [currentTime, setCurrentTime] = useState(0);\n  useEffect(() => {\n    fetch('/time').then(res => res.json()).then(data => {\n      setCurrentTime(data.time);\n    });\n  }, []); // const script = url => {\n  //   useEffect(() => {\n  //     const script = document.createElement('script');\n  //   }, []);\n  // };\n\n  var resultTemplate = React.createClass({\n    displayName: \"resultTemplate\",\n    render: function () {\n      return /*#__PURE__*/React.createElement(\"script\", {\n        id: \"result-template\",\n        type: \"text/x-handlebars-template\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 24,\n          columnNumber: 9\n        }\n      }, \"<dl> <img src=\\\"\", '{', '{', \"images.0.url\", '}', '}', \"\\\"> <dt>User Name</dt> <dd>\", '{', '{', \"id\", '}', '}', \"</dd> <dt>Display Name</dt> <dd>\", '{', '{', \"display_name\", '}', '}', \"</dd> <dt>Country</dt> <dd>\", '{', '{', \"country\", '}', '}', \"</dd> <dt>Followers</dt> <dd>\", '{', '{', \"followers.total\", '}', '}', \"</dd> <dt>Profile</dt> <dd><a href=\\\"\", '{', '{', \"external_urls.spotify\", '}', '}', \"\\\" target=\\\"_blank\\\">\", '{', '{', \"external_urls.spotify\", '}', '}', \"</a></dd> <dt>Email</dt> <dd>\", '{', '{', \"email\", '}', '}', \"</dd> <dt>Product</dt> <dd>\", '{', '{', \"product\", '}', '}', \"</dd> </dl>\");\n    }\n  });\n\n  (function () {\n    function login(callback) {\n      var CLIENT_ID = '6b284830006843e7ae7b170725715aed';\n      var REDIRECT_URI = 'http://jmperezperez.com/spotify-oauth-jsfiddle-proxy/';\n\n      function getLoginURL(scopes) {\n        return 'https://accounts.spotify.com/authorize?client_id=' + CLIENT_ID + '&redirect_uri=' + encodeURIComponent(REDIRECT_URI) + '&scope=' + encodeURIComponent(scopes.join(' ')) + '&response_type=token';\n      }\n\n      var url = getLoginURL(['user-read-email']);\n      var width = 450,\n          height = 730,\n          left = 1000 - width / 2,\n          top = 1000 - height / 2;\n      window.addEventListener(\"message\", function (event) {\n        var hash = JSON.parse(event.data);\n\n        if (hash.type == 'access_token') {\n          callback(hash.access_token);\n        }\n      }, false);\n      var w = window.open(url, 'Spotify', 'menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=' + width + ', height=' + height + ', top=' + top + ', left=' + left);\n    }\n\n    function getUserData(accessToken) {\n      return $.ajax({\n        url: 'https://api.spotify.com/v1/me',\n        headers: {\n          'Authorization': 'Bearer ' + accessToken\n        }\n      });\n    }\n\n    var templateSource = document.getElementById('result-template').innerHTML,\n        template = Handlebars.compile(templateSource),\n        resultsPlaceholder = document.getElementById('result'),\n        loginButton = document.getElementById('btn-login');\n    loginButton.addEventListener('click', function () {\n      login(function (accessToken) {\n        getUserData(accessToken).then(function (response) {\n          loginButton.style.display = 'none';\n          resultsPlaceholder.innerHTML = template(response);\n        });\n      });\n    });\n  })();\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"home\",\n    className: \"page-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }, \"Displaying User Data\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }, \"Log in with your Spotify account and this demo will display information about you fetched using the Spotify Web API\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    id: \"btn-login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"result\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }), \"resultTemplate();\");\n}\n\n;\nexport default Home;","map":{"version":3,"sources":["/Users/kyle.snow/repos/spotify_recommendation_engine/spotify-rec-app/src/Home.js"],"names":["React","useState","useEffect","Banner","Home","currentTime","setCurrentTime","fetch","then","res","json","data","time","resultTemplate","createClass","render","login","callback","CLIENT_ID","REDIRECT_URI","getLoginURL","scopes","encodeURIComponent","join","url","width","height","left","top","window","addEventListener","event","hash","JSON","parse","type","access_token","w","open","getUserData","accessToken","$","ajax","headers","templateSource","document","getElementById","innerHTML","template","Handlebars","compile","resultsPlaceholder","loginButton","response","style","display"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport Banner from './Banner';\n\nfunction Home() {\n  const [currentTime, setCurrentTime] = useState(0);\n\n  useEffect(() => {\n    fetch('/time').then(res => res.json()).then(data => {\n      setCurrentTime(data.time);\n    });\n  }, []);\n  \n  // const script = url => {\n  //   useEffect(() => {\n  //     const script = document.createElement('script');\n  //   }, []);\n  // };\n  \n  var resultTemplate = React.createClass({\n    render: function() {\n      return (\n        <script id=\"result-template\" type=\"text/x-handlebars-template\">\n          &lt;dl&gt;\n          &lt;img src=\"{'{'}{'{'}images.0.url{'}'}{'}'}\"&gt;\n          &lt;dt&gt;User Name&lt;/dt&gt;\n          &lt;dd&gt;{'{'}{'{'}id{'}'}{'}'}&lt;/dd&gt;\n          &lt;dt&gt;Display Name&lt;/dt&gt;\n          &lt;dd&gt;{'{'}{'{'}display_name{'}'}{'}'}&lt;/dd&gt;\n          &lt;dt&gt;Country&lt;/dt&gt;\n          &lt;dd&gt;{'{'}{'{'}country{'}'}{'}'}&lt;/dd&gt;\n          &lt;dt&gt;Followers&lt;/dt&gt;\n          &lt;dd&gt;{'{'}{'{'}followers.total{'}'}{'}'}&lt;/dd&gt;\n          &lt;dt&gt;Profile&lt;/dt&gt;\n          &lt;dd&gt;&lt;a href=\"{'{'}{'{'}external_urls.spotify{'}'}{'}'}\" target=\"_blank\"&gt;{'{'}{'{'}external_urls.spotify{'}'}{'}'}&lt;/a&gt;&lt;/dd&gt;\n          &lt;dt&gt;Email&lt;/dt&gt;\n          &lt;dd&gt;{'{'}{'{'}email{'}'}{'}'}&lt;/dd&gt;\n          &lt;dt&gt;Product&lt;/dt&gt;\n          &lt;dd&gt;{'{'}{'{'}product{'}'}{'}'}&lt;/dd&gt;\n          &lt;/dl&gt;\n        </script>\n      );\n    }\n  });\n\n  (function() {\n      \n      function login(callback) {\n          var CLIENT_ID = '6b284830006843e7ae7b170725715aed';\n          var REDIRECT_URI = 'http://jmperezperez.com/spotify-oauth-jsfiddle-proxy/';\n          function getLoginURL(scopes) {\n              return 'https://accounts.spotify.com/authorize?client_id=' + CLIENT_ID +\n                '&redirect_uri=' + encodeURIComponent(REDIRECT_URI) +\n                '&scope=' + encodeURIComponent(scopes.join(' ')) +\n                '&response_type=token';\n          }\n          \n          var url = getLoginURL([\n              'user-read-email'\n          ]);\n          \n          var width = 450,\n              height = 730,\n              left = (1000) - (width / 2),\n              top = (1000) - (height / 2);\n      \n          window.addEventListener(\"message\", function(event) {\n              var hash = JSON.parse(event.data);\n              if (hash.type == 'access_token') {\n                  callback(hash.access_token);\n              }\n          }, false);\n          \n          var w = window.open(url,\n                              'Spotify',\n                              'menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=' + width + ', height=' + height + ', top=' + top + ', left=' + left\n                             );\n          \n      }\n  \n      function getUserData(accessToken) {\n          return $.ajax({\n              url: 'https://api.spotify.com/v1/me',\n              headers: {\n                 'Authorization': 'Bearer ' + accessToken\n              }\n          });\n      }\n  \n      var templateSource = document.getElementById('result-template').innerHTML,\n          template = Handlebars.compile(templateSource),\n          resultsPlaceholder = document.getElementById('result'),\n          loginButton = document.getElementById('btn-login');\n      \n      loginButton.addEventListener('click', function() {\n          login(function(accessToken) {\n              getUserData(accessToken)\n                  .then(function(response) {\n                      loginButton.style.display = 'none';\n                      resultsPlaceholder.innerHTML = template(response);\n                  });\n              });\n      });\n      \n  })();\n\n  return (\n    <div id=\"home\" className=\"page-body\">\n  \n      <h1>Displaying User Data</h1>\n      <p>Log in with your Spotify account and this demo will display information about you fetched using the Spotify Web\n        API</p>\n      <button className=\"btn btn-primary\" id=\"btn-login\">Login</button>\n      <div id=\"result\"></div>\n      \n      {/*<div id=\"login\">*/}\n      {/*  <h1>Authorize Spotify Account</h1>*/}\n      {/*  <a href=\"/login\" className=\"btn btn-login\">Log in with Spotify</a>*/}\n      {/*</div>*/}\n      {/*<div id=\"loggedin\">*/}\n      {/*  <div id=\"user-profile\"/>*/}\n      {/*  <div id=\"oauth\"/>*/}\n      {/*  <button className=\"btn btn-default\" id=\"obtain-new-token\">Obtain new token using the refresh token</button>*/}\n      {/*</div>*/}\n      \n{/*      <script id=\"user-profile-template\" type=\"text/x-handlebars-template\">\n        <h1>Logged in as {{display_name}}</h1>\n        <div className={\"media\"}>\n          <div className={\"pull-left\"}>\n            <img className={\"media-object\"} width={\"150\"} src=\"{{images.0.url}}\" />\n          </div>\n          <div className={\"media-body\"}>\n            <dl className={\"dl-horizontal\"}>\n              <dt>Display name</dt><dd className={\"clearfix\"}>{display_name}</dd>\n              <dt>Id</dt><dd>{{id}}</dd>\n              <dt>Email</dt><dd>{{email}}</dd>\n              <dt>Spotify URI</dt><dd><a href=\"{{external_urls.spotify}}\">{{external_urlsspotify}}</a></dd>\n              <dt>Link</dt><dd><a href={\"{{href}}\"}>{{href}}</a></dd>\n              <dt>Profile Image</dt><dd className={\"clearfix\"}><a href=\"{\"{{images.0.url}}\"}\"}>{{images.0.url}}</a></dd>\n              <dt>Country</dt><dd>{{country}}</dd>\n            </dl>\n          </div>\n        </div>\n      </script>*/}\n      \n      {/*<script id={\"oauth-template\"} type={\"text/x-handlebars-template\"}>*/}\n      {/*  <h2>oAuth info</h2>*/}\n      {/*  <dl className={\"dl-horizontal\"}>*/}\n      {/*    <dt>Access token</dt><dd className={\"text-overflow\"}>{{access_token}}</dd>*/}\n      {/*    <dt>Refresh token</dt><dd className={\"text-overflow\"}>{{refresh_token}}</dd>*/}\n      {/*  </dl>*/}\n      {/*</script>*/}\n      \n      {/*<script src={\"//cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0-alpha.1/handlebars.min.js\"}></script>*/}\n      {/*<script src={\"http://code.jquery.com/jquery-1.10.1.min.js\"}></script>*/}\n      {/*<script>*/}\n      {/*  (function() {*/}\n      {/*  */}\n      {/*  /***/}\n      {/*   * Obtains parameters from the hash of the URL*/}\n      {/*   * @return Object*/}\n      {/*   */}\n      {/*  function getHashParams() {*/}\n      {/*    var hashParams = {};*/}\n      {/*    var e, r = /([^&;=]+)=?([^&;]*)/g,*/}\n      {/*      q = window.location.hash.substring(1);*/}\n      {/*    while(e = r.exec(q)) {*/}\n      {/*      hashParams[e[1]] = decodeURIComponent(e[2]);*/}\n      {/*    }*/}\n      {/*    return hashParams;*/}\n      {/*  }*/}\n      {/*  */}\n      {/*  var userProfileSource = document.getElementById('user-profile-template').innerHTML,*/}\n      {/*      userProfileTemplate = Handlebars.compile(userProfileSource),*/}\n      {/*      userProfilePlaceholder = document.getElementById('user-profile');*/}\n      {/*  */}\n      {/*  var oauthSource = document.getElementById('oauth-template').innerHTML,*/}\n      {/*      oauthTemplate = Handlebars.compile(oauthSource),*/}\n      {/*      oauthPlaceholder = document.getElementById('oauth');*/}\n      {/*  */}\n      {/*  var params = getHashParams();*/}\n      {/*  */}\n      {/*  var access_token = params.access_token,*/}\n      {/*      refresh_token = params.refresh_token,*/}\n      {/*      error = params.error;*/}\n      {/*  */}\n      {/*  if (error) {*/}\n      {/*    alert('There was an error during the authentication');*/}\n      {/*  } else {*/}\n      {/*    if (access_token) {*/}\n      {/*      // render oauth info*/}\n      {/*      oauthPlaceholder.innerHTML = oauthTemplate({*/}\n      {/*        access_token: access_token,*/}\n      {/*        refresh_token: refresh_token*/}\n      {/*      });*/}\n      {/*      */}\n      {/*      $.ajax({*/}\n      {/*        url: 'https://api.spotify.com/v1/me',*/}\n      {/*        headers: {*/}\n      {/*          'Authorization': 'Bearer ' + access_token*/}\n      {/*        },*/}\n      {/*        success: function(response) {*/}\n      {/*          userProfilePlaceholder.innerHTML = userProfileTemplate(response);*/}\n      {/*          $('#login').hide();*/}\n      {/*          $('#loggedin').show();*/}\n      {/*        }*/}\n      {/*      });*/}\n      {/*    } else {*/}\n      {/*      // render initial screen*/}\n      {/*      $('#login').show();*/}\n      {/*      $('#loggedin').hide();*/}\n      {/*    }*/}\n      {/*  */}\n      {/*    document.getElementById('obtain-new-token').addEventListener('click', function() {*/}\n      {/*      $.ajax({*/}\n      {/*        url: '/refresh_token',*/}\n      {/*        data: {*/}\n      {/*          'refresh_token': refresh_token*/}\n      {/*        }*/}\n      {/*      }).done(function(data) {*/}\n      {/*        access_token = data.access_token;*/}\n      {/*        oauthPlaceholder.innerHTML = oauthTemplate({*/}\n      {/*          access_token: access_token,*/}\n      {/*          refresh_token: refresh_token*/}\n      {/*        });*/}\n      {/*      });*/}\n      {/*      }, false);*/}\n      {/*  }*/}\n      {/*})();*/}\n      {/*</script>*/}\n      \n      {/*<img src={logo} className=\"App-logo\" alt=\"logo\" />*/}\n      {/*<p>*/}\n      {/*  Edit <code>src/App.js</code> and save to reload.*/}\n      {/*</p>*/}\n      {/*<a*/}\n      {/*  className=\"App-link\"*/}\n      {/*  href=\"https://reactjs.org\"*/}\n      {/*  target=\"_blank\"*/}\n      {/*  rel=\"noopener noreferrer\"*/}\n      {/*>*/}\n      {/*  Learn React*/}\n      {/*</a>*/}\n      {/*<p>The current time is {currentTime}.</p>*/}\n    \n      resultTemplate();\n    </div>\n    \n    \n  );\n};\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}